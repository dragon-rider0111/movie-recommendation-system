{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Movie Recommendation System - Praveen Kumar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Poppins:300,500&amp;display=swap'>
    <link rel='stylesheet' href="{% static 'recommender/index-style.css' %}">
</head>

<body>
    <!-- partial:index.partial.html -->
    <!-- Hamburger -->
    <div class="hamburger">
        <div class="hamburger__container">
            <span class="hamburger__top"></span>
            <span class="hamburger__middle"></span>
            <span class="hamburger__bottom"></span>
        </div>
    </div>

    <!-- Menu -->
    <div class="menu">
        <div class="menu__container bg-white">
            <nav class="menu__nav">
                <ul class="menu__list">
                    <li class="menu__item js-span">Follow me on:</li>
                    <li class="menu__item">
                        <a class="menu__link" href="https://www.linkedin.com/in/praveen-kumar-inbox/"
                            target="_blank">LinkedIn</a>
                    </li>
                    <li class="menu__item">
                        <a class="menu__link" href="https://github.com/inboxpraveen" target="_blank">Github</a>
                    </li>
                    <li class="menu__item">
                        <a class="menu__link" href="https://twitter.com/InboxPraveen" target="_blank">Twitter</a>
                    </li>
                    <li class="menu__item">
                        <a class="menu__link" href="https://medium.com/@pklappy21" target="_blank">Medium</a>
                    </li>
                </ul>
            </nav>
            <nav class="menu__nav">
                <ul class="menu__list">
                    <li class="menu__item js-span">Other Links</li>
                    <!--
        <li class="menu__item">
          <a class="menu__link" href="#" target="_blank">All Heroku Projects</a>
        </li>
-->
                    <li class="menu__item">
                        <a class="menu__link" href="https://inboxpraveen.github.io" target="_blank">Portfolio</a>
                    </li>
                    <li class="menu__item">
                        <a class="menu__link" href="https://medium.com/hitchhikers-guide-to-deep-learning"
                            target="_blank">My Blogs</a>
                    </li>
                    <li class="menu__item menu__item--contact">
                        <span>Contact</span>
                        <div class="menu__info">
                            <span>Bengaluru, IN</span>
                            <span>
                                <a class="menu__external" href="mailto:inbox.praveen.kumar17@gmail.com">Click here to
                                    mail</a>
                            </span>
                        </div>
                    </li>
                </ul>
            </nav>
            <div class="menu__sidebar">
                <div class="menu__flip">
                    <div class="menu__copy">
                        <span>Checkout my portfolio website:</span>
                        <span><a class="menu__external" href="https://inboxpraveen.github.io" target="_blank"
                                rel="noopener noreferrer">inboxpraveen.github.io</a></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="menu__img bg-black">
            <figure class="absolute-bg"
                style="background-image: url('https://source.unsplash.com/t2Sai-AqIpI/900x1600');"></figure>
        </div>
    </div>

    <!-- Demo -->
    <div class="movie">
        <h2><u>Movie Recommendation System</u></h2>
        <form action="{{ url_for('main') }}" method="POST">
            <input type="text" id="movie_name" name="movie_name" placeholder="Enter a full movie name" required />
            <input type="submit" id="submission_button" value="Submit" />
        </form>
        <p style="color: #919191; padding: 1em;">The model uses <b>Content Based Recommendations</b> to find similar
            movies. Intuitive idea behind is <i>"If a person likes a particular item, he/she will also like an item that
                is similar to it."</i> The dataset is taken from <a href="https://www.kaggle.com/"
                target="_blank">Kaggle.com</a>.</p>
        <br>
        <p>Read more on recommendation systems on <a
                href="https://developers.google.com/machine-learning/recommendation" target="_blank">Google Developers
                Machine Learning Blogs</a>.</p>
    </div>
    <!-- partial -->
    <script src='https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js'></script>
    <script>
        // Menu
        const Menu = (() => {
            let s;

            return {
                settings() {
                    return {
                        body: $('body'),
                        hamburger: $('.hamburger'),
                        open: 'js-menu-open',
                        visible: 'js-menu-visible',
                        overflow: 'js-overflow',
                        width: $(window).width(),
                        prevWidth: $(window).width()
                    };

                },

                init() {
                    s = this.settings();
                    this.bindEvents();
                },

                bindEvents() {
                    let menuContainerWidth;

                    if (s.width < 864) {
                        menuContainerWidth = 100;
                    } else if (s.width < 1456) {
                        menuContainerWidth = 50;
                    } else {
                        menuContainerWidth = 45;
                    }

                    $(window).on('resize', () => {
                        s.width = $(window).width();

                        if (s.width < 864) {
                            menuContainerWidth = 100;
                        } else if (s.width < 1456) {
                            menuContainerWidth = 50;
                        } else {
                            menuContainerWidth = 45;
                        }
                    });

                    s.hamburger.on('click', () => {
                        Menu.toggleMenu(menuContainerWidth);
                    });

                    s.body.on('keyup', e => {
                        if (s.body.hasClass(s.open) && e.which === 27) {
                            Menu.toggleMenu(menuContainerWidth);
                        }
                    });
                },

                toggleMenu(width) {
                    s.hamburger.toggleClass('js-hamburger');
                    s.body.toggleClass(s.open);
                    s.body.toggleClass(s.overflow);

                    // Opening transition
                    if (s.body.hasClass(s.open)) {
                        s.prevWidth = width;

                        anime.timeline({
                            easing: 'easeOutQuart',
                            duration: 600,
                            begin() {
                                $('.menu__img').css('left', `${width}%`);
                                s.body.addClass(s.visible);
                            }
                        }).

                            add({
                                targets: '.menu__container',
                                width: [0, `${width}%`]
                            }).

                            add({
                                targets: '.menu__img',
                                width: [0, `${100 - width}%`]
                            },
                                0);
                    }

                    // Closing transition
                    if (!s.body.hasClass(s.open)) {
                        anime.timeline({
                            easing: 'easeInQuart',
                            duration: 600,
                            delay: 200,
                            complete() {
                                s.body.removeClass(s.visible);
                            }
                        }).

                            add({
                                targets: '.menu__container',
                                width: [`${s.prevWidth}%`, 0]
                            }).

                            add({
                                targets: '.menu__img',
                                width: [`${100 - s.prevWidth}%`, 0]
                            },
                                0);
                    }
                }
            };

        })();

        // Inits
        $(() => {
            // Spanize
            const span = $('.js-span');
            let $ele, words;

            for (let i = 0; i < span.length; i++) {
                $ele = $(span).eq(i);
                words = $ele.html();

                $ele.html(words.replace(/([A-z0-9'@+-<>.,'"“”‘’?!*&/]+)/g, '<span>$&</span>'));
            }

            Menu.init();
        });    
    </script>

</body>

</html>